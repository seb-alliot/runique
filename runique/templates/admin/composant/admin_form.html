{% extends "admin_base.html" %}

{% block title %}
  {% if is_edit is defined and is_edit %}
    {% if resource is defined and resource.title is defined %}
      Modifier — {{ resource.title }}
    {% else %}
      Modifier — Élément
    {% endif %}
  {% else %}
    {% if resource is defined and resource.title is defined %}
      Créer — {{ resource.title }}
    {% else %}
      Créer — Élément
    {% endif %}
  {% endif %}
{% endblock %}

{% block breadcrumb %}
  <span class="breadcrumb-sep">/</span>

  {% if resource is defined and resource.key is defined %}
    {% if resource.title is defined %}
      <a href="/admin/{{ resource.key }}/list">{{ resource.title }}</a>
    {% else %}
      <a href="/admin/{{ resource.key }}/list">Élément</a>
    {% endif %}
  {% else %}
    <span>Admin</span>
  {% endif %}

  <span class="breadcrumb-sep">/</span>

  {% if is_edit is defined and is_edit %}
    <span>Modifier</span>
  {% else %}
    <span>Créer</span>
  {% endif %}
{% endblock %}

{% block content %}

  <header class="page-header">
    <h1>
      {% if is_edit is defined and is_edit %}
        Modifier
      {% else %}
        Créer
      {% endif %}

      {% if resource is defined and resource.title is defined %}
        {{ resource.title }}
      {% else %}
        Élément
      {% endif %}
    </h1>
  </header>

  <div class="card">
    <div class="card-header">
      <h2>Informations</h2>
    </div>

    <div class="card-body">
      {% if resource is defined and resource.key is defined %}
        <form method="POST"
              enctype="multipart/form-data"
              action="/admin/{{ resource.key }}{% if is_edit is defined and is_edit %}{% if object_id is defined %}/{{ object_id }}{% endif %}{% else %}/create{% endif %}">

          <div class="form-grid">
            {% if form_fields is defined %}
              {% if form_fields.html is defined and form_fields.html %}
                {{ form_fields.html | safe }}
              {% else %}
                <p>Aucun champ disponible pour le moment.</p>
              {% endif %}
            {% else %}
              <p>Aucun champ disponible pour le moment.</p>
            {% endif %}
          </div>

          <div class="form-actions">
            <a href="/admin/{{ resource.key }}/list" class="btn btn-secondary">Annuler</a>
            <button type="submit" class="btn btn-primary">
              {% if is_edit is defined and is_edit %}
                Enregistrer
              {% else %}
                Créer
              {% endif %}
            </button>
          </div>
        </form>
      {% else %}
        <div class="alert alert-danger">
          Ressource invalide : impossible d’afficher le formulaire.
        </div>
      {% endif %}
    </div>
  </div>

{% endblock %}
