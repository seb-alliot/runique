<div class="form-field color-field">
    {% if field.label %}
    <label for="id_{{ field.name }}" class="field-label{% if field.error %} field-error{% endif %}">
        {{ field.label }}
        {% if field.is_required.choice %}
            <span class="required-indicator" title="{{ field.is_required.message | default(value='Requis') }}"></span>
        {% endif %}
    </label>
    {% endif %}

    <div class="color-picker-container">
        <input
            type="color"
            name="{{ field.name }}"
            id="id_{{ field.name }}"
            value="{{ field.value | default(value='#000000') }}"
            {% if field.is_required.choice %}required{% endif %}
            {% for key, value in field.html_attributes %}{{ key }}="{{ value }}" {% endfor %}
            class="color-picker"
        >
        <input
            type="text"
            id="id_{{ field.name }}_text"
            value="{{ field.value | default(value='#000000') }}"
            placeholder="#RRGGBB"
            maxlength="7"
            pattern="^#[0-9A-Fa-f]{6}$"
            class="color-text-input"
            {% if readonly.choice %}readonly{% endif %}
            {% if disabled.choice %}disabled{% endif %}
        >
    </div>

    {% if field.error %}
    <span class="field-error-message">{{ field.error }}</span>
    {% endif %}

    <script>
        (function() {
            const picker = document.getElementById('id_{{ field.name }}');
            const textInput = document.getElementById('id_{{ field.name }}_text');

            picker.addEventListener('input', function() {
                textInput.value = picker.value.toUpperCase();
            });
        })();
    </script>
</div>